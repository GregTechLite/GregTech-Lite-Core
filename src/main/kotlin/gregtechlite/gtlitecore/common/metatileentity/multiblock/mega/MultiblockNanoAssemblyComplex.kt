package gregtechlite.gtlitecore.common.metatileentity.multiblock.mega

import gregtech.api.metatileentity.interfaces.IGregTechTileEntity
import gregtech.api.metatileentity.multiblock.IMultiblockPart
import gregtech.api.metatileentity.multiblock.MultiMapMultiblockController
import gregtech.api.metatileentity.multiblock.MultiblockAbility.INPUT_ENERGY
import gregtech.api.metatileentity.multiblock.MultiblockAbility.INPUT_LASER
import gregtech.api.pattern.BlockPattern
import gregtech.api.pattern.FactoryBlockPattern
import gregtech.api.recipes.RecipeMaps.ASSEMBLER_RECIPES
import gregtech.client.renderer.ICubeRenderer
import gregtechlite.gtlitecore.api.recipe.GTLiteRecipeMaps.ANTI_GRAVITY_ASSEMBLY_CHAMBER_RECIPES
import gregtechlite.gtlitecore.api.recipe.GTLiteRecipeMaps.COMPONENT_ASSEMBLY_LINE_RECIPES
import gregtechlite.gtlitecore.api.recipe.GTLiteRecipeMaps.NANO_ASSEMBLY_MATRIX_RECIPES
import gregtechlite.gtlitecore.api.translation.MultiblockTooltipBuilder.Companion.addTooltip
import gregtechlite.gtlitecore.client.renderer.texture.GTLiteOverlays
import gregtechlite.gtlitecore.common.block.adapter.GTGlassCasing
import gregtechlite.gtlitecore.common.block.variant.ActiveUniqueCasing
import gregtechlite.gtlitecore.common.block.variant.GlassCasing
import gregtechlite.gtlitecore.common.block.variant.MetalCasing
import gregtechlite.gtlitecore.common.block.variant.MultiblockCasing
import net.minecraft.item.ItemStack
import net.minecraft.util.ResourceLocation
import net.minecraft.world.World
import net.minecraftforge.fml.relauncher.Side
import net.minecraftforge.fml.relauncher.SideOnly

/**
 * allowed laser, ignore max recipe tier, ignore ordered inputs.
 *
 * uxv stage, another prepare works for supracausal circuit
 */
class MultiblockNanoAssemblyComplex(id: ResourceLocation) : MultiMapMultiblockController(id,
                                                                                         arrayOf(NANO_ASSEMBLY_MATRIX_RECIPES, ANTI_GRAVITY_ASSEMBLY_CHAMBER_RECIPES,
                                                                                                 COMPONENT_ASSEMBLY_LINE_RECIPES, ASSEMBLER_RECIPES))
{

    companion object
    {
        private val casingState = MetalCasing.LAFIUM.state
        private val secondCasingState = ActiveUniqueCasing.NANO_PRECISE_ASSEMBLY_UNIT.state
        private val thirdCasingState = MultiblockCasing.NANITE_TRANSMISSION_CASING.state
        private val gearboxCasingState = ActiveUniqueCasing.NANITE_CONTROL_CASING.state
        private val coilState = MultiblockCasing.PARTICLE_EXCITATION_WIRE_COIL.state
        private val glassState = GTGlassCasing.FUSION_GLASS.state
        private val secondGlassState = GlassCasing.QUANTUM.state
    }

    override fun createMetaTileEntity(tileEntity: IGregTechTileEntity) = MultiblockNanoAssemblyComplex(metaTileEntityId)

    // @formatter:off

    override fun createStructurePattern(): BlockPattern = FactoryBlockPattern.start()
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GAAAG    AFG ", "        GAAAG        ", " GFA    GAAAG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GHHHG    AFG ", "        GHCHG        ", " GFA    GHHHG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "         QQQ         ", "        QHHHQ        ", "        QHCHQ        ", "        QHHHQ        ", "         QQQ         ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ", "                     ")
        .aisle("        E   E        ", "       GCG GCG       ", "       FDF FDF       ", "     AAAAA AAAAA     ", "     FDF     FDF     ", "   AFGCG     GCGFA   ", "   ADCE       ECDA   ", " GFAFG         GFAFG ", "ECDA     GGG     ADCE", " GFA    GAAAG    AFG ", "        GASAG        ", " GFA    GAAAG    AFG ", "ECDA     GGG     ADCE", " GFAFG         GFAFG ", "   ADCE       ECDA   ", "   AFGCG     GCGFA   ", "     FDF     FDF     ", "     AAAAA AAAAA     ", "       FDF FDF       ", "       GCG GCG       ", "        E   E        ")
        .where('S', selfPredicate())
        .where('A', states(casingState)
            .setMinGlobalLimited(600)
            .or(autoAbilities(false, false, true, true, true, false, false)))
        .where('E', states(casingState)
            .or(abilities(INPUT_ENERGY))
            .or(abilities(INPUT_LASER)))
        .where('G', states(secondCasingState))
        .where('C', states(thirdCasingState))
        .where('F', states(glassState))
        .where('Q', states(secondGlassState))
        .where('D', states(gearboxCasingState))
        .where('H', states(coilState))
        .where(' ', any())
        .build()

    // @formatter:on

    @SideOnly(Side.CLIENT)
    override fun getBaseTexture(sourcePart: IMultiblockPart?): ICubeRenderer = GTLiteOverlays.LAFIUM_CASING

    @SideOnly(Side.CLIENT)
    override fun getFrontOverlay(): ICubeRenderer = GTLiteOverlays.NANO_ASSEMBLY_COMPLEX_OVERLAY

    @SideOnly(Side.CLIENT)
    override fun addInformation(stack: ItemStack, player: World?, tooltip: MutableList<String>, advanced: Boolean)
    {
        addTooltip(tooltip)
        {
            addMachineTypeLine()
        }
    }

    override fun canBeDistinct(): Boolean = true

    override fun hasMaintenanceMechanics(): Boolean = false

}